{
  "annotations": {
    "list": [
      {
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "enable": true,
        "expr": "ALERTS{service=\"sigmavault\"}",
        "iconColor": "rgba(255, 96, 96, 1)",
        "name": "ΣVAULT Alerts",
        "step": "60s"
      }
    ]
  },
  "description": "ΣVAULT Storage Metrics - Capacity utilization, cost trends, SLA compliance, replication lag, operation latencies",
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": 3,
  "links": [
    {
      "asDropdown": false,
      "icon": "star",
      "includeVars": true,
      "targetBlank": true,
      "title": "View Cost Breakdown",
      "tooltip": "Navigate to SLO dashboard for cost allocation",
      "type": "link",
      "url": "/d/slo-error-budget/slo-dashboard?${__url_time_range}"
    }
  ],
  "panels": [
    {
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "description": "Storage capacity utilization percentage - warns at 80%, critical at 95%",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 80 },
              { "color": "red", "value": 95 }
            ]
          },
          "unit": "percent"
        }
      },
      "gridPos": { "h": 8, "w": 6, "x": 0, "y": 0 },
      "id": 40,
      "options": {
        "orientation": "auto",
        "reduceOptions": {
          "values": false,
          "fields": "",
          "calcs": ["lastNotNull"]
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [
        {
          "expr": "tier2:sigmavault_capacity_utilization",
          "legendFormat": "Capacity Used %"
        }
      ],
      "title": "Storage Capacity Utilization",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "description": "Available storage capacity remaining",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "unit": "bytes"
        }
      },
      "gridPos": { "h": 8, "w": 6, "x": 6, "y": 0 },
      "id": 41,
      "options": {
        "legend": { "displayMode": "list" },
        "tooltip": { "mode": "multi" }
      },
      "targets": [
        {
          "expr": "neurectomy_sigmavault_total_bytes - neurectomy_sigmavault_used_bytes",
          "legendFormat": "Available Capacity"
        }
      ],
      "title": "Available Storage",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "description": "Storage capacity trend - used vs total over 30 days",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": { "fillOpacity": 20 },
          "unit": "bytes"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 8 },
      "id": 42,
      "options": {
        "legend": { "displayMode": "list" },
        "tooltip": { "mode": "multi" }
      },
      "targets": [
        {
          "expr": "neurectomy_sigmavault_used_bytes",
          "legendFormat": "Used"
        },
        {
          "expr": "neurectomy_sigmavault_total_bytes",
          "legendFormat": "Total"
        }
      ],
      "title": "Capacity Trend (30 days)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "description": "Monthly cost trend for storage in USD",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "custom": { "lineWidth": 2 },
          "unit": "currencyUSD"
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 0 },
      "id": 43,
      "options": {
        "legend": { "displayMode": "table", "calcs": ["mean", "max"] },
        "tooltip": { "mode": "multi" }
      },
      "targets": [
        {
          "expr": "neurectomy_sigmavault_cost_usd",
          "legendFormat": "Storage Cost"
        }
      ],
      "title": "Cost Trend",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "description": "Projected monthly cost as percentage of budget",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 70 },
              { "color": "red", "value": 90 }
            ]
          },
          "unit": "percent"
        }
      },
      "gridPos": { "h": 8, "w": 6, "x": 0, "y": 16 },
      "id": 44,
      "options": {
        "orientation": "auto",
        "reduceOptions": {
          "values": false,
          "fields": "",
          "calcs": ["lastNotNull"]
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [
        {
          "expr": "(neurectomy_sigmavault_cost_usd / neurectomy_storage_budget_usd) * 100",
          "legendFormat": "% of Budget"
        }
      ],
      "title": "Cost Projection vs Budget",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "description": "Cost breakdown by storage class - Standard, Infrequent, Archive",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" }
        }
      },
      "gridPos": { "h": 8, "w": 6, "x": 6, "y": 16 },
      "id": 45,
      "options": {
        "legend": { "displayMode": "table", "values": ["value"] },
        "pieType": "pie",
        "tooltip": { "mode": "single" }
      },
      "targets": [
        {
          "expr": "sum(neurectomy_sigmavault_cost_usd) by (storage_class)",
          "legendFormat": "{{ storage_class }}"
        }
      ],
      "title": "Cost by Storage Class",
      "type": "piechart"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "description": "SLA compliance percentage - target 99.9%, warn at 99%, critical at 98%",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "red", "value": null },
              { "color": "yellow", "value": 99 },
              { "color": "green", "value": 99.9 }
            ]
          },
          "unit": "percent"
        }
      },
      "gridPos": { "h": 8, "w": 6, "x": 12, "y": 16 },
      "id": 46,
      "options": {
        "orientation": "auto",
        "reduceOptions": {
          "values": false,
          "fields": "",
          "calcs": ["lastNotNull"]
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [
        {
          "expr": "(1 - (neurectomy_sigmavault_downtime_seconds / 86400)) * 100",
          "legendFormat": "SLA Compliance"
        }
      ],
      "title": "SLA Compliance",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "description": "Replication lag between primary and replicas in seconds - should be <1s",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 5 },
              { "color": "red", "value": 60 }
            ]
          },
          "unit": "s"
        }
      },
      "gridPos": { "h": 8, "w": 6, "x": 0, "y": 24 },
      "id": 47,
      "options": {
        "orientation": "auto",
        "reduceOptions": {
          "values": false,
          "fields": "",
          "calcs": ["lastNotNull"]
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [
        {
          "expr": "neurectomy_sigmavault_replication_lag_seconds",
          "legendFormat": "Replication Lag"
        }
      ],
      "title": "Replication Lag",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "description": "Read latency P95 percentile - target <50ms",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 100 },
              { "color": "red", "value": 200 }
            ]
          },
          "unit": "ms"
        }
      },
      "gridPos": { "h": 8, "w": 6, "x": 6, "y": 24 },
      "id": 48,
      "options": {
        "orientation": "auto",
        "reduceOptions": {
          "values": false,
          "fields": "",
          "calcs": ["lastNotNull"]
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [
        {
          "expr": "histogram_quantile(0.95, rate(neurectomy_sigmavault_read_duration_seconds_bucket[5m])) * 1000",
          "legendFormat": "Read Latency P95"
        }
      ],
      "title": "Read Latency (P95)",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "description": "Write latency P95 percentile - target <100ms",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              { "color": "green", "value": null },
              { "color": "yellow", "value": 150 },
              { "color": "red", "value": 300 }
            ]
          },
          "unit": "ms"
        }
      },
      "gridPos": { "h": 8, "w": 6, "x": 12, "y": 24 },
      "id": 49,
      "options": {
        "orientation": "auto",
        "reduceOptions": {
          "values": false,
          "fields": "",
          "calcs": ["lastNotNull"]
        },
        "showThresholdLabels": false,
        "showThresholdMarkers": true
      },
      "targets": [
        {
          "expr": "histogram_quantile(0.95, rate(neurectomy_sigmavault_write_duration_seconds_bucket[5m])) * 1000",
          "legendFormat": "Write Latency P95"
        }
      ],
      "title": "Write Latency (P95)",
      "type": "gauge"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "description": "Storage operations per minute - Read, Write, Delete, List",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" }
        }
      },
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 32 },
      "id": 50,
      "options": {
        "legend": { "displayMode": "list" },
        "orientation": "horizontal",
        "reduceOptions": {
          "values": false,
          "fields": "",
          "calcs": ["lastNotNull"]
        }
      },
      "targets": [
        {
          "expr": "rate(neurectomy_sigmavault_operations_total[1m])",
          "legendFormat": "{{ operation_type }}"
        }
      ],
      "title": "Operations per Minute",
      "type": "barchart"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "prometheus"
      },
      "description": "Cost per GB per month - helps with cost optimization decisions",
      "fieldConfig": {
        "defaults": {
          "color": { "mode": "palette-classic" },
          "unit": "currencyUSD"
        }
      },
      "gridPos": { "h": 8, "w": 6, "x": 12, "y": 32 },
      "id": 51,
      "options": {
        "legend": { "displayMode": "list" },
        "tooltip": { "mode": "multi" }
      },
      "targets": [
        {
          "expr": "neurectomy_sigmavault_cost_usd / (neurectomy_sigmavault_used_bytes / 1000000000)",
          "legendFormat": "Cost per GB"
        }
      ],
      "title": "Cost per GB/Month",
      "type": "stat"
    }
  ],
  "refresh": "1m",
  "schemaVersion": 38,
  "style": "dark",
  "tags": ["phase-18", "sigmavault", "storage", "tier-2", "cost"],
  "templating": {
    "list": [
      {
        "current": {
          "selected": false,
          "text": "production",
          "value": "production"
        },
        "datasource": {
          "type": "prometheus",
          "uid": "prometheus"
        },
        "definition": "label_values(neurectomy_sigmavault_used_bytes, environment)",
        "description": null,
        "hide": 0,
        "includeAll": false,
        "label": "Environment",
        "multi": false,
        "name": "environment",
        "options": [],
        "query": {
          "query": "label_values(neurectomy_sigmavault_used_bytes, environment)",
          "refId": "StandardVariableQuery"
        },
        "refresh": 1,
        "regex": "",
        "skipUrlSync": false,
        "sort": 0,
        "type": "query"
      }
    ]
  },
  "time": {
    "from": "now-30d",
    "to": "now"
  },
  "timepicker": {},
  "timezone": "browser",
  "title": "Dashboard 3: ΣVAULT Storage Metrics",
  "uid": "sigmavault-storage",
  "version": 1,
  "weekStart": ""
}
